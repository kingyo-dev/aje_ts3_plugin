

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Permission checks &mdash; TeamSpeak SDK 3.1.1.0 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Security salts and hashes" href="security-salt.html" />
    <link rel="prev" title="Custom passwords" href="passwords.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> TeamSpeak SDK
          

          
            
            <img src="../_static/logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                3.1.1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../errors.html">TeamSpeak Error Codes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../properties.html">Property Enums</a></li>
<li class="toctree-l1"><a class="reference internal" href="../enumerations.html">Structures &amp; Enumerations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../client_api.html">TeamSpeak Client Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../server_api.html">TeamSpeak Server Functions</a></li>
</ul>
<p class="caption"><span class="caption-text">Server</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="basic.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="list-items.html">List available clients, channels, servers</a></li>
<li class="toctree-l1"><a class="reference internal" href="vserver-manage.html">Create and stop virtual servers</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced-create.html">Advanced virtual server creation</a></li>
<li class="toctree-l1"><a class="reference internal" href="info.html">Retrieve and store information</a></li>
<li class="toctree-l1"><a class="reference internal" href="channels.html">Managing channels</a></li>
<li class="toctree-l1"><a class="reference internal" href="clients.html">Managing clients</a></li>
<li class="toctree-l1"><a class="reference internal" href="whisper.html">Whisper lists</a></li>
<li class="toctree-l1"><a class="reference internal" href="encryption.html">Custom encryption</a></li>
<li class="toctree-l1"><a class="reference internal" href="passwords.html">Custom passwords</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Permission checks</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#available-callbacks">Available callbacks</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#standard-permission-callbacks">Standard Permission callbacks</a></li>
<li class="toctree-l3"><a class="reference internal" href="#filetransfer-permission-callbacks">FileTransfer permission callbacks</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#example">Example</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="security-salt.html">Security salts and hashes</a></li>
<li class="toctree-l1"><a class="reference internal" href="disable-commands.html">Disabling protocol commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="filetransfer.html">Filetransfer</a></li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">FAQ</a></li>
</ul>
<p class="caption"><span class="caption-text">Client</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../client/intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../client/basic.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../client/connections.html">Managing server connections</a></li>
<li class="toctree-l1"><a class="reference internal" href="../client/logging.html">Logging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../client/audio.html">Client Audio</a></li>
<li class="toctree-l1"><a class="reference internal" href="../client/wave-files.html">Playing wave files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../client/3dsound.html">3D Sound</a></li>
<li class="toctree-l1"><a class="reference internal" href="../client/whisper.html">Whisper lists</a></li>
<li class="toctree-l1"><a class="reference internal" href="../client/voice-encryption.html">Channel voice data encryption</a></li>
<li class="toctree-l1"><a class="reference internal" href="../client/info.html">Retrieve and store information</a></li>
<li class="toctree-l1"><a class="reference internal" href="../client/channels.html">Channel Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../client/client-list.html">List clients</a></li>
<li class="toctree-l1"><a class="reference internal" href="../client/client-kick.html">Kicking clients</a></li>
<li class="toctree-l1"><a class="reference internal" href="../client/local-mute.html">Muting other clients</a></li>
<li class="toctree-l1"><a class="reference internal" href="../client/textmessages.html">Text chat</a></li>
<li class="toctree-l1"><a class="reference internal" href="../client/filetransfer.html">Filetransfer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../client/encryption.html">Custom encryption</a></li>
<li class="toctree-l1"><a class="reference internal" href="../client/passwords.html">Custom passwords</a></li>
<li class="toctree-l1"><a class="reference internal" href="../client/faq.html">FAQ</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">TeamSpeak SDK</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Permission checks</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="permission-checks">
<h1>Permission checks<a class="headerlink" href="#permission-checks" title="Permalink to this headline">¶</a></h1>
<p>The TeamSpeak SDK offers an optional custom permission system, allowing
SDK users to gain more control over allowed user actions on a
TeamSpeak server. The custom permissions system is implemented in the
Server Lib by adding callback functions which will be called, if
implemented, when a certain user action occurs. In this callback the
developer can allow or deny the action.</p>
<p>The callbacks should return <a class="reference internal" href="../errors.html#c.Ts3ErrorType.ERROR_ok" title="ERROR_ok"><code class="xref c c-enumerator docutils literal notranslate"><span class="pre">ERROR_ok</span></code></a> to allow the action or
<code class="xref c c-enumerator docutils literal notranslate"><span class="pre">ERROR_permission</span></code> to deny it.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>If a callback is not implemented, the action will be allowed by default.</p>
</div>
<div class="section" id="available-callbacks">
<h2>Available callbacks<a class="headerlink" href="#available-callbacks" title="Permalink to this headline">¶</a></h2>
<div class="section" id="standard-permission-callbacks">
<h3>Standard Permission callbacks<a class="headerlink" href="#standard-permission-callbacks" title="Permalink to this headline">¶</a></h3>
<dl class="c struct">
<dt>
<em class="property">struct </em><code class="sig-name descname">ServerLibFunctions</code><br /></dt>
<dd><p>Server callbacks. Zero initialize and set members to functions that are to be called when the event in question happens. Every callback you use should exit quickly to avoid stalling the server. If you need any expensive activity upon receiving callbacks, consider starting the activity in a new thread and allow the callback to exit quickly. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Public Members</p>
<dl class="c var">
<dt>
unsigned int (*<code class="sig-name descname">permClientCanConnect</code>)<span class="sig-paren">(</span>uint64 serverID, <em class="property">const</em> <em class="property">struct</em> <a class="reference internal" href="../enumerations.html#c.ClientMiniExport" title="ClientMiniExport">ClientMiniExport</a> *client<span class="sig-paren">)</span><br /></dt>
<dd><p>called when a client is about to connect. Can be used to deny clients from connecting. </p>
<p>Return <a class="reference internal" href="../errors.html#public__errors_8h_1a0bcf1e0a5e32989890f6e85064327f7ba21e7fdf5a31623bfa8042865df880a9d"><span class="std std-ref">ERROR_ok</span></a> to allow the client on the server, or <a class="reference internal" href="../errors.html#public__errors_8h_1a0bcf1e0a5e32989890f6e85064327f7bacd0d64c660d7e6009b05bbba5631607d"><span class="std std-ref">ERROR_permissions</span></a> to reject the client.</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p><a class="reference internal" href="../errors.html#public__errors_8h_1a0bcf1e0a5e32989890f6e85064327f7ba21e7fdf5a31623bfa8042865df880a9d"><span class="std std-ref">ERROR_ok</span></a> to allow, <a class="reference internal" href="../errors.html#public__errors_8h_1a0bcf1e0a5e32989890f6e85064327f7bacd0d64c660d7e6009b05bbba5631607d"><span class="std std-ref">ERROR_permissions</span></a> to deny </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">serverID</span></code>: the server the client wants to connect to </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">client</span></code>: pointer to a <a class="reference internal" href="../enumerations.html#struct_client_mini_export"><span class="std std-ref">ClientMiniExport</span></a> describing the client trying to connect </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c var">
<dt>
unsigned int (*<code class="sig-name descname">permClientCanGetChannelDescription</code>)<span class="sig-paren">(</span>uint64 serverID, <em class="property">const</em> <em class="property">struct</em> <a class="reference internal" href="../enumerations.html#c.ClientMiniExport" title="ClientMiniExport">ClientMiniExport</a> *client<span class="sig-paren">)</span><br /></dt>
<dd><p>called when a client requests channel description of a channel using <a class="reference internal" href="../client_api.html#clientlib_8h_1a806652361900fb894016df2c14bddc6d"><span class="std std-ref">ts3client_requestChannelDescription</span></a>. Can be used to deny access to channel descriptions. </p>
<p>Return <a class="reference internal" href="../errors.html#public__errors_8h_1a0bcf1e0a5e32989890f6e85064327f7ba21e7fdf5a31623bfa8042865df880a9d"><span class="std std-ref">ERROR_ok</span></a> to allow the action, or <a class="reference internal" href="../errors.html#public__errors_8h_1a0bcf1e0a5e32989890f6e85064327f7bacd0d64c660d7e6009b05bbba5631607d"><span class="std std-ref">ERROR_permissions</span></a> to reject it.</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p><a class="reference internal" href="../errors.html#public__errors_8h_1a0bcf1e0a5e32989890f6e85064327f7ba21e7fdf5a31623bfa8042865df880a9d"><span class="std std-ref">ERROR_ok</span></a> to allow, <a class="reference internal" href="../errors.html#public__errors_8h_1a0bcf1e0a5e32989890f6e85064327f7bacd0d64c660d7e6009b05bbba5631607d"><span class="std std-ref">ERROR_permissions</span></a> to deny </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">serverID</span></code>: the server on which the request was received </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">client</span></code>: pointer to a <a class="reference internal" href="../enumerations.html#struct_client_mini_export"><span class="std std-ref">ClientMiniExport</span></a> describing the client requesting the channel description </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c var">
<dt>
unsigned int (*<code class="sig-name descname">permClientUpdate</code>)<span class="sig-paren">(</span>uint64 serverID, anyID clientID, <em class="property">struct</em> <a class="reference internal" href="../enumerations.html#c.VariablesExport" title="VariablesExport">VariablesExport</a> *variables<span class="sig-paren">)</span><br /></dt>
<dd><p>called when a client wants to update a clients variables. Used to deny or allow updating certain client variables </p>
<p>Return <a class="reference internal" href="../errors.html#public__errors_8h_1a0bcf1e0a5e32989890f6e85064327f7ba21e7fdf5a31623bfa8042865df880a9d"><span class="std std-ref">ERROR_ok</span></a> to allow the action, or <a class="reference internal" href="../errors.html#public__errors_8h_1a0bcf1e0a5e32989890f6e85064327f7bacd0d64c660d7e6009b05bbba5631607d"><span class="std std-ref">ERROR_permissions</span></a> to reject it.</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p><a class="reference internal" href="../errors.html#public__errors_8h_1a0bcf1e0a5e32989890f6e85064327f7ba21e7fdf5a31623bfa8042865df880a9d"><span class="std std-ref">ERROR_ok</span></a> to allow, <a class="reference internal" href="../errors.html#public__errors_8h_1a0bcf1e0a5e32989890f6e85064327f7bacd0d64c660d7e6009b05bbba5631607d"><span class="std std-ref">ERROR_permissions</span></a> to deny </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">serverID</span></code>: the server for which the callback was called </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">clientID</span></code>: the client for which the variables are attempted to be changed. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">variables</span></code>: pointer to a <a class="reference internal" href="../enumerations.html#struct_variables_export"><span class="std std-ref">VariablesExport</span></a> containing the variables, new and old values of the client. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c var">
<dt>
unsigned int (*<code class="sig-name descname">permClientKickFromChannel</code>)<span class="sig-paren">(</span>uint64 serverID, <em class="property">const</em> <em class="property">struct</em> <a class="reference internal" href="../enumerations.html#c.ClientMiniExport" title="ClientMiniExport">ClientMiniExport</a> *client, int toKickCount, <em class="property">struct</em> <a class="reference internal" href="../enumerations.html#c.ClientMiniExport" title="ClientMiniExport">ClientMiniExport</a> *toKickClients, <em class="property">const</em> char *reasonText<span class="sig-paren">)</span><br /></dt>
<dd><p>called before a client is kicked from the channel. Allows you to control whether clients are allowed to kick another client </p>
<p>Return <a class="reference internal" href="../errors.html#public__errors_8h_1a0bcf1e0a5e32989890f6e85064327f7ba21e7fdf5a31623bfa8042865df880a9d"><span class="std std-ref">ERROR_ok</span></a> to allow the action, or <a class="reference internal" href="../errors.html#public__errors_8h_1a0bcf1e0a5e32989890f6e85064327f7bacd0d64c660d7e6009b05bbba5631607d"><span class="std std-ref">ERROR_permissions</span></a> to reject it.</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p><a class="reference internal" href="../errors.html#public__errors_8h_1a0bcf1e0a5e32989890f6e85064327f7ba21e7fdf5a31623bfa8042865df880a9d"><span class="std std-ref">ERROR_ok</span></a> to allow, <a class="reference internal" href="../errors.html#public__errors_8h_1a0bcf1e0a5e32989890f6e85064327f7bacd0d64c660d7e6009b05bbba5631607d"><span class="std std-ref">ERROR_permissions</span></a> to deny </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">serverID</span></code>: the server for which the callback was called </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">client</span></code>: pointer to a <a class="reference internal" href="../enumerations.html#struct_client_mini_export"><span class="std std-ref">ClientMiniExport</span></a> describing the client attempting to kick another client. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">toKickCount</span></code>: number of clients that are supposed to be kicked </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">toKickClients</span></code>: array of <a class="reference internal" href="../enumerations.html#struct_client_mini_export"><span class="std std-ref">ClientMiniExport</span></a> describing the clients to be kicked </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">reasonText</span></code>: utf8 encoded c string containing the reason for the kick provided. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c var">
<dt>
unsigned int (*<code class="sig-name descname">permClientKickFromServer</code>)<span class="sig-paren">(</span>uint64 serverID, <em class="property">const</em> <em class="property">struct</em> <a class="reference internal" href="../enumerations.html#c.ClientMiniExport" title="ClientMiniExport">ClientMiniExport</a> *client, int toKickCount, <em class="property">struct</em> <a class="reference internal" href="../enumerations.html#c.ClientMiniExport" title="ClientMiniExport">ClientMiniExport</a> *toKickClients, <em class="property">const</em> char *reasonText<span class="sig-paren">)</span><br /></dt>
<dd><p>called before a client is kicked from the server. Allows you to control whether clients are allowed to kick another client </p>
<p>Return <a class="reference internal" href="../errors.html#public__errors_8h_1a0bcf1e0a5e32989890f6e85064327f7ba21e7fdf5a31623bfa8042865df880a9d"><span class="std std-ref">ERROR_ok</span></a> to allow the action, or <a class="reference internal" href="../errors.html#public__errors_8h_1a0bcf1e0a5e32989890f6e85064327f7bacd0d64c660d7e6009b05bbba5631607d"><span class="std std-ref">ERROR_permissions</span></a> to reject it.</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p><a class="reference internal" href="../errors.html#public__errors_8h_1a0bcf1e0a5e32989890f6e85064327f7ba21e7fdf5a31623bfa8042865df880a9d"><span class="std std-ref">ERROR_ok</span></a> to allow, <a class="reference internal" href="../errors.html#public__errors_8h_1a0bcf1e0a5e32989890f6e85064327f7bacd0d64c660d7e6009b05bbba5631607d"><span class="std std-ref">ERROR_permissions</span></a> to deny </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">serverID</span></code>: the server for which the callback was called </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">client</span></code>: pointer to a <a class="reference internal" href="../enumerations.html#struct_client_mini_export"><span class="std std-ref">ClientMiniExport</span></a> describing the client attempting to kick another client. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">toKickCount</span></code>: number of clients that are supposed to be kicked </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">toKickClients</span></code>: array of <a class="reference internal" href="../enumerations.html#struct_client_mini_export"><span class="std std-ref">ClientMiniExport</span></a> describing the clients to be kicked </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">reasonText</span></code>: utf8 encoded c string containing the provided reason for the kick. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c var">
<dt>
unsigned int (*<code class="sig-name descname">permClientMove</code>)<span class="sig-paren">(</span>uint64 serverID, <em class="property">const</em> <em class="property">struct</em> <a class="reference internal" href="../enumerations.html#c.ClientMiniExport" title="ClientMiniExport">ClientMiniExport</a> *client, int toMoveCount, <em class="property">struct</em> <a class="reference internal" href="../enumerations.html#c.ClientMiniExport" title="ClientMiniExport">ClientMiniExport</a> *toMoveClients, uint64 newChannel, <em class="property">const</em> char *reasonText<span class="sig-paren">)</span><br /></dt>
<dd><p>called when a client requests to move one or more other clients. Allows you to control whether a client can move the clients. </p>
<p>Return <a class="reference internal" href="../errors.html#public__errors_8h_1a0bcf1e0a5e32989890f6e85064327f7ba21e7fdf5a31623bfa8042865df880a9d"><span class="std std-ref">ERROR_ok</span></a> to allow the action, or <a class="reference internal" href="../errors.html#public__errors_8h_1a0bcf1e0a5e32989890f6e85064327f7bacd0d64c660d7e6009b05bbba5631607d"><span class="std std-ref">ERROR_permissions</span></a> to reject it.</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p><a class="reference internal" href="../errors.html#public__errors_8h_1a0bcf1e0a5e32989890f6e85064327f7ba21e7fdf5a31623bfa8042865df880a9d"><span class="std std-ref">ERROR_ok</span></a> to allow, <a class="reference internal" href="../errors.html#public__errors_8h_1a0bcf1e0a5e32989890f6e85064327f7bacd0d64c660d7e6009b05bbba5631607d"><span class="std std-ref">ERROR_permissions</span></a> to deny </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">serverID</span></code>: the server on which the move is attempted. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">client</span></code>: pointer to a <a class="reference internal" href="../enumerations.html#struct_client_mini_export"><span class="std std-ref">ClientMiniExport</span></a> describing the client attempting to move the client(s). </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">toMoveCount</span></code>: number of clients that are being moved. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">toMoveClients</span></code>: array of <a class="reference internal" href="../enumerations.html#struct_client_mini_export"><span class="std std-ref">ClientMiniExport</span></a> describing which clients are being moved. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">newChannel</span></code>: id of the channel the clients are to be moved in to. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">reasonText</span></code>: utf8 encoded c string containing the reason provided for the move. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c var">
<dt>
unsigned int (*<code class="sig-name descname">permChannelMove</code>)<span class="sig-paren">(</span>uint64 serverID, <em class="property">const</em> <em class="property">struct</em> <a class="reference internal" href="../enumerations.html#c.ClientMiniExport" title="ClientMiniExport">ClientMiniExport</a> *client, uint64 channelID, uint64 newParentChannelID<span class="sig-paren">)</span><br /></dt>
<dd><p>called when a client attempts to move a channel. Allows you to control whether the client is allowed to move the channel. </p>
<p>Return <a class="reference internal" href="../errors.html#public__errors_8h_1a0bcf1e0a5e32989890f6e85064327f7ba21e7fdf5a31623bfa8042865df880a9d"><span class="std std-ref">ERROR_ok</span></a> to allow the action, or <a class="reference internal" href="../errors.html#public__errors_8h_1a0bcf1e0a5e32989890f6e85064327f7bacd0d64c660d7e6009b05bbba5631607d"><span class="std std-ref">ERROR_permissions</span></a> to reject it.</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p><a class="reference internal" href="../errors.html#public__errors_8h_1a0bcf1e0a5e32989890f6e85064327f7ba21e7fdf5a31623bfa8042865df880a9d"><span class="std std-ref">ERROR_ok</span></a> to allow, <a class="reference internal" href="../errors.html#public__errors_8h_1a0bcf1e0a5e32989890f6e85064327f7bacd0d64c660d7e6009b05bbba5631607d"><span class="std std-ref">ERROR_permissions</span></a> to deny </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">serverID</span></code>: the server for which the callback was called </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">client</span></code>: a <a class="reference internal" href="../enumerations.html#struct_client_mini_export"><span class="std std-ref">ClientMiniExport</span></a> describing the client attempting to move the channel. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">channelID</span></code>: the channel to be moved. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">newParentChannelID</span></code>: the new parent channel of the channel </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c var">
<dt>
unsigned int (*<code class="sig-name descname">permSendTextMessage</code>)<span class="sig-paren">(</span>uint64 serverID, <em class="property">const</em> <em class="property">struct</em> <a class="reference internal" href="../enumerations.html#c.ClientMiniExport" title="ClientMiniExport">ClientMiniExport</a> *client, anyID targetMode, uint64 targetClientOrChannel, <em class="property">const</em> char *textMessage<span class="sig-paren">)</span><br /></dt>
<dd><p>called when a client tries to send a message. Allows you to control whether the client is allowed to send the message. </p>
<p>Return <a class="reference internal" href="../errors.html#public__errors_8h_1a0bcf1e0a5e32989890f6e85064327f7ba21e7fdf5a31623bfa8042865df880a9d"><span class="std std-ref">ERROR_ok</span></a> to allow the action, or <a class="reference internal" href="../errors.html#public__errors_8h_1a0bcf1e0a5e32989890f6e85064327f7bacd0d64c660d7e6009b05bbba5631607d"><span class="std std-ref">ERROR_permissions</span></a> to reject it.</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p><a class="reference internal" href="../errors.html#public__errors_8h_1a0bcf1e0a5e32989890f6e85064327f7ba21e7fdf5a31623bfa8042865df880a9d"><span class="std std-ref">ERROR_ok</span></a> to allow, <a class="reference internal" href="../errors.html#public__errors_8h_1a0bcf1e0a5e32989890f6e85064327f7bacd0d64c660d7e6009b05bbba5631607d"><span class="std std-ref">ERROR_permissions</span></a> to deny </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">serverID</span></code>: the server for which the callback was called </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">client</span></code>: a <a class="reference internal" href="../enumerations.html#struct_client_mini_export"><span class="std std-ref">ClientMiniExport</span></a> describing the client attempting to send the message </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">targetMode</span></code>: describing the type of message attempting to be sent. One of the values from the <a class="reference internal" href="../enumerations.html#public__definitions_8h_1a2773a2b8004cd45e398baa89bb2acef8"><span class="std std-ref">TextMessageTargetMode</span></a> enum </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">targetClientOrChannel</span></code>: id of the channel or client (depending of the targetMode) that the message is sent to. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">textMessage</span></code>: utf8 encoded c string containing the message to be sent. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c var">
<dt>
unsigned int (*<code class="sig-name descname">permServerRequestConnectionInfo</code>)<span class="sig-paren">(</span>uint64 serverID, <em class="property">const</em> <em class="property">struct</em> <a class="reference internal" href="../enumerations.html#c.ClientMiniExport" title="ClientMiniExport">ClientMiniExport</a> *client<span class="sig-paren">)</span><br /></dt>
<dd><p>called when server connection information is requested using <a class="reference internal" href="../client_api.html#clientlib_8h_1a20a6cc2a8dba1a0faf5f031a27ad4102"><span class="std std-ref">ts3client_requestServerConnectionInfo</span></a>. Can be used to deny access. </p>
<p>Return <a class="reference internal" href="../errors.html#public__errors_8h_1a0bcf1e0a5e32989890f6e85064327f7ba21e7fdf5a31623bfa8042865df880a9d"><span class="std std-ref">ERROR_ok</span></a> to allow the action, or <a class="reference internal" href="../errors.html#public__errors_8h_1a0bcf1e0a5e32989890f6e85064327f7bacd0d64c660d7e6009b05bbba5631607d"><span class="std std-ref">ERROR_permissions</span></a> to reject it.</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p><a class="reference internal" href="../errors.html#public__errors_8h_1a0bcf1e0a5e32989890f6e85064327f7ba21e7fdf5a31623bfa8042865df880a9d"><span class="std std-ref">ERROR_ok</span></a> to allow, <a class="reference internal" href="../errors.html#public__errors_8h_1a0bcf1e0a5e32989890f6e85064327f7bacd0d64c660d7e6009b05bbba5631607d"><span class="std std-ref">ERROR_permissions</span></a> to deny </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">serverID</span></code>: the server for which the callback was called </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">client</span></code>: a <a class="reference internal" href="../enumerations.html#struct_client_mini_export"><span class="std std-ref">ClientMiniExport</span></a> describing the client requesting the action </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c var">
<dt>
unsigned int (*<code class="sig-name descname">permSendConnectionInfo</code>)<span class="sig-paren">(</span>uint64 serverID, <em class="property">const</em> <em class="property">struct</em> <a class="reference internal" href="../enumerations.html#c.ClientMiniExport" title="ClientMiniExport">ClientMiniExport</a> *client, int *mayViewIpPort, <em class="property">const</em> <em class="property">struct</em> <a class="reference internal" href="../enumerations.html#c.ClientMiniExport" title="ClientMiniExport">ClientMiniExport</a> *targetClient<span class="sig-paren">)</span><br /></dt>
<dd><p>called when a client attempts to request another clients connection variables using <a class="reference internal" href="../client_api.html#clientlib_8h_1a70dbf9fbdae6bb1c85da531a57a85273"><span class="std std-ref">ts3client_requestConnectionInfo</span></a> </p>
<p>Return <a class="reference internal" href="../errors.html#public__errors_8h_1a0bcf1e0a5e32989890f6e85064327f7ba21e7fdf5a31623bfa8042865df880a9d"><span class="std std-ref">ERROR_ok</span></a> to allow the action, or <a class="reference internal" href="../errors.html#public__errors_8h_1a0bcf1e0a5e32989890f6e85064327f7bacd0d64c660d7e6009b05bbba5631607d"><span class="std std-ref">ERROR_permissions</span></a> to reject it.</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p><a class="reference internal" href="../errors.html#public__errors_8h_1a0bcf1e0a5e32989890f6e85064327f7ba21e7fdf5a31623bfa8042865df880a9d"><span class="std std-ref">ERROR_ok</span></a> to allow, <a class="reference internal" href="../errors.html#public__errors_8h_1a0bcf1e0a5e32989890f6e85064327f7bacd0d64c660d7e6009b05bbba5631607d"><span class="std std-ref">ERROR_permissions</span></a> to deny </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">serverID</span></code>: the server for which the callback was called </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">client</span></code>: describes the client requesting the other clients information </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mayViewIpPort</span></code>: pointer to a variable that controls whether the IP and port of the target client may be seen by the client. Set to 1 to allow the requesting client to see the IP and port. Set to 0 to deny IP and port. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">targetClient</span></code>: describes the client that the connection information is requested for. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c var">
<dt>
unsigned int (*<code class="sig-name descname">permChannelCreate</code>)<span class="sig-paren">(</span>uint64 serverID, <em class="property">const</em> <em class="property">struct</em> <a class="reference internal" href="../enumerations.html#c.ClientMiniExport" title="ClientMiniExport">ClientMiniExport</a> *client, uint64 parentChannelID, <em class="property">struct</em> <a class="reference internal" href="../enumerations.html#c.VariablesExport" title="VariablesExport">VariablesExport</a> *variables<span class="sig-paren">)</span><br /></dt>
<dd><p>called when a client attempts to create a channel. Allows you to control whether or not the client may create the desired channel. </p>
<p>Return <a class="reference internal" href="../errors.html#public__errors_8h_1a0bcf1e0a5e32989890f6e85064327f7ba21e7fdf5a31623bfa8042865df880a9d"><span class="std std-ref">ERROR_ok</span></a> to allow the action, or <a class="reference internal" href="../errors.html#public__errors_8h_1a0bcf1e0a5e32989890f6e85064327f7bacd0d64c660d7e6009b05bbba5631607d"><span class="std std-ref">ERROR_permissions</span></a> to reject it.</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p><a class="reference internal" href="../errors.html#public__errors_8h_1a0bcf1e0a5e32989890f6e85064327f7ba21e7fdf5a31623bfa8042865df880a9d"><span class="std std-ref">ERROR_ok</span></a> to allow, <a class="reference internal" href="../errors.html#public__errors_8h_1a0bcf1e0a5e32989890f6e85064327f7bacd0d64c660d7e6009b05bbba5631607d"><span class="std std-ref">ERROR_permissions</span></a> to deny </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">serverID</span></code>: the server on which the client attempts to create the channel </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">client</span></code>: a <a class="reference internal" href="../enumerations.html#struct_client_mini_export"><span class="std std-ref">ClientMiniExport</span></a> describing the client trying to create a channel </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">parentChannelID</span></code>: the channel that is the parent channel of the channel to be created. 0 if the channel to be created will be a root channel. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">variables</span></code>: a <a class="reference internal" href="../enumerations.html#struct_variables_export"><span class="std std-ref">VariablesExport</span></a> struct that describes the channel to be created. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c var">
<dt>
unsigned int (*<code class="sig-name descname">permChannelEdit</code>)<span class="sig-paren">(</span>uint64 serverID, <em class="property">const</em> <em class="property">struct</em> <a class="reference internal" href="../enumerations.html#c.ClientMiniExport" title="ClientMiniExport">ClientMiniExport</a> *client, uint64 channelID, <em class="property">struct</em> <a class="reference internal" href="../enumerations.html#c.VariablesExport" title="VariablesExport">VariablesExport</a> *variables<span class="sig-paren">)</span><br /></dt>
<dd><p>called when a channel is about to be edited by a client. Allows you to prevent channel edits. </p>
<p>Return <a class="reference internal" href="../errors.html#public__errors_8h_1a0bcf1e0a5e32989890f6e85064327f7ba21e7fdf5a31623bfa8042865df880a9d"><span class="std std-ref">ERROR_ok</span></a> to allow the action, or <a class="reference internal" href="../errors.html#public__errors_8h_1a0bcf1e0a5e32989890f6e85064327f7bacd0d64c660d7e6009b05bbba5631607d"><span class="std std-ref">ERROR_permissions</span></a> to reject it.</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p><a class="reference internal" href="../errors.html#public__errors_8h_1a0bcf1e0a5e32989890f6e85064327f7ba21e7fdf5a31623bfa8042865df880a9d"><span class="std std-ref">ERROR_ok</span></a> to allow, <a class="reference internal" href="../errors.html#public__errors_8h_1a0bcf1e0a5e32989890f6e85064327f7bacd0d64c660d7e6009b05bbba5631607d"><span class="std std-ref">ERROR_permissions</span></a> to deny </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">serverID</span></code>: the server for which the callback was called </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">client</span></code>: a <a class="reference internal" href="../enumerations.html#struct_client_mini_export"><span class="std std-ref">ClientMiniExport</span></a> describing the client trying to edit the channel </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">parentChannelID</span></code>: the channel that is to be edited. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">variables</span></code>: a <a class="reference internal" href="../enumerations.html#struct_variables_export"><span class="std std-ref">VariablesExport</span></a> struct that describes the channel after the edit. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c var">
<dt>
unsigned int (*<code class="sig-name descname">permChannelDelete</code>)<span class="sig-paren">(</span>uint64 serverID, <em class="property">const</em> <em class="property">struct</em> <a class="reference internal" href="../enumerations.html#c.ClientMiniExport" title="ClientMiniExport">ClientMiniExport</a> *client, uint64 channelID<span class="sig-paren">)</span><br /></dt>
<dd><p>called before a channel is deleted by a client. Allows you to deny a client deleting channels. </p>
<p>Return <a class="reference internal" href="../errors.html#public__errors_8h_1a0bcf1e0a5e32989890f6e85064327f7ba21e7fdf5a31623bfa8042865df880a9d"><span class="std std-ref">ERROR_ok</span></a> to allow the action, or <a class="reference internal" href="../errors.html#public__errors_8h_1a0bcf1e0a5e32989890f6e85064327f7bacd0d64c660d7e6009b05bbba5631607d"><span class="std std-ref">ERROR_permissions</span></a> to reject it.</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p><a class="reference internal" href="../errors.html#public__errors_8h_1a0bcf1e0a5e32989890f6e85064327f7ba21e7fdf5a31623bfa8042865df880a9d"><span class="std std-ref">ERROR_ok</span></a> to allow, <a class="reference internal" href="../errors.html#public__errors_8h_1a0bcf1e0a5e32989890f6e85064327f7bacd0d64c660d7e6009b05bbba5631607d"><span class="std std-ref">ERROR_permissions</span></a> to deny </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">serverID</span></code>: the server on which the channel is to be deleted </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">client</span></code>: a <a class="reference internal" href="../enumerations.html#struct_client_mini_export"><span class="std std-ref">ClientMiniExport</span></a> describing the client trying to delete the channel </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">channelID</span></code>: the channel that is to be deleted </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c var">
<dt>
unsigned int (*<code class="sig-name descname">permChannelSubscribe</code>)<span class="sig-paren">(</span>uint64 serverID, <em class="property">const</em> <em class="property">struct</em> <a class="reference internal" href="../enumerations.html#c.ClientMiniExport" title="ClientMiniExport">ClientMiniExport</a> *client, uint64 channelID<span class="sig-paren">)</span><br /></dt>
<dd><p>called when a client requests to subscribe a channel. Allows you to deny subscribing to a channel. </p>
<p>Return <a class="reference internal" href="../errors.html#public__errors_8h_1a0bcf1e0a5e32989890f6e85064327f7ba21e7fdf5a31623bfa8042865df880a9d"><span class="std std-ref">ERROR_ok</span></a> to allow the action, or <a class="reference internal" href="../errors.html#public__errors_8h_1a0bcf1e0a5e32989890f6e85064327f7bacd0d64c660d7e6009b05bbba5631607d"><span class="std std-ref">ERROR_permissions</span></a> to reject it.</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p><a class="reference internal" href="../errors.html#public__errors_8h_1a0bcf1e0a5e32989890f6e85064327f7ba21e7fdf5a31623bfa8042865df880a9d"><span class="std std-ref">ERROR_ok</span></a> to allow, <a class="reference internal" href="../errors.html#public__errors_8h_1a0bcf1e0a5e32989890f6e85064327f7bacd0d64c660d7e6009b05bbba5631607d"><span class="std std-ref">ERROR_permissions</span></a> to deny </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">serverID</span></code>: the server on which the client attempts to subscribe to the channel. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">client</span></code>: a <a class="reference internal" href="../enumerations.html#struct_client_mini_export"><span class="std std-ref">ClientMiniExport</span></a> describing the client trying to subscribe the channel </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">channelID</span></code>: the channel that is to be subscribed </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

</div>
</dd></dl>

</div>
<div class="section" id="filetransfer-permission-callbacks">
<h3>FileTransfer permission callbacks<a class="headerlink" href="#filetransfer-permission-callbacks" title="Permalink to this headline">¶</a></h3>
<dl class="c struct">
<dt>
<em class="property">struct </em><code class="sig-name descname">ServerLibFunctions</code><br /></dt>
<dd><p>Server callbacks. Zero initialize and set members to functions that are to be called when the event in question happens. Every callback you use should exit quickly to avoid stalling the server. If you need any expensive activity upon receiving callbacks, consider starting the activity in a new thread and allow the callback to exit quickly. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Public Members</p>
<dl class="c var">
<dt>
unsigned int (*<code class="sig-name descname">permFileTransferInitUpload</code>)<span class="sig-paren">(</span>uint64 serverID, <em class="property">const</em> <em class="property">struct</em> <a class="reference internal" href="../enumerations.html#c.ClientMiniExport" title="ClientMiniExport">ClientMiniExport</a> *client, <em class="property">const</em> <em class="property">struct</em> <a class="reference internal" href="../enumerations.html#c.ts3sc_ftinitupload" title="ts3sc_ftinitupload">ts3sc_ftinitupload</a> *params<span class="sig-paren">)</span><br /></dt>
<dd><p>called when a file is to be uploaded. Allows you to deny a client from uploading files, files above a certain size, etc. </p>
<p>Return <a class="reference internal" href="../errors.html#public__errors_8h_1a0bcf1e0a5e32989890f6e85064327f7ba21e7fdf5a31623bfa8042865df880a9d"><span class="std std-ref">ERROR_ok</span></a> to allow the action, or <a class="reference internal" href="../errors.html#public__errors_8h_1a0bcf1e0a5e32989890f6e85064327f7bacd0d64c660d7e6009b05bbba5631607d"><span class="std std-ref">ERROR_permissions</span></a> to reject it.</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p><a class="reference internal" href="../errors.html#public__errors_8h_1a0bcf1e0a5e32989890f6e85064327f7ba21e7fdf5a31623bfa8042865df880a9d"><span class="std std-ref">ERROR_ok</span></a> to allow, <a class="reference internal" href="../errors.html#public__errors_8h_1a0bcf1e0a5e32989890f6e85064327f7bacd0d64c660d7e6009b05bbba5631607d"><span class="std std-ref">ERROR_permissions</span></a> to deny </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">serverID</span></code>: the server for which the callback was called </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">client</span></code>: describes the client that attempts to upload the file. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">params</span></code>: describes the file to be uploaded. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c var">
<dt>
unsigned int (*<code class="sig-name descname">permFileTransferInitDownload</code>)<span class="sig-paren">(</span>uint64 serverID, <em class="property">const</em> <em class="property">struct</em> <a class="reference internal" href="../enumerations.html#c.ClientMiniExport" title="ClientMiniExport">ClientMiniExport</a> *client, <em class="property">const</em> <em class="property">struct</em> <a class="reference internal" href="../enumerations.html#c.ts3sc_ftinitdownload" title="ts3sc_ftinitdownload">ts3sc_ftinitdownload</a> *params<span class="sig-paren">)</span><br /></dt>
<dd><p>called when a file is to be downloaded. Allows you to deny a client from downloading files, files above a certain size, etc. </p>
<p>Return <a class="reference internal" href="../errors.html#public__errors_8h_1a0bcf1e0a5e32989890f6e85064327f7ba21e7fdf5a31623bfa8042865df880a9d"><span class="std std-ref">ERROR_ok</span></a> to allow the action, or <a class="reference internal" href="../errors.html#public__errors_8h_1a0bcf1e0a5e32989890f6e85064327f7bacd0d64c660d7e6009b05bbba5631607d"><span class="std std-ref">ERROR_permissions</span></a> to reject it.</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p><a class="reference internal" href="../errors.html#public__errors_8h_1a0bcf1e0a5e32989890f6e85064327f7ba21e7fdf5a31623bfa8042865df880a9d"><span class="std std-ref">ERROR_ok</span></a> to allow, <a class="reference internal" href="../errors.html#public__errors_8h_1a0bcf1e0a5e32989890f6e85064327f7bacd0d64c660d7e6009b05bbba5631607d"><span class="std std-ref">ERROR_permissions</span></a> to deny </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">serverID</span></code>: the server for which the callback was called </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">client</span></code>: describes the client that attempts to download the file </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">params</span></code>: describes the file to be downloaded. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c var">
<dt>
unsigned int (*<code class="sig-name descname">permFileTransferGetFileInfo</code>)<span class="sig-paren">(</span>uint64 serverID, <em class="property">const</em> <em class="property">struct</em> <a class="reference internal" href="../enumerations.html#c.ClientMiniExport" title="ClientMiniExport">ClientMiniExport</a> *client, <em class="property">const</em> <em class="property">struct</em> <a class="reference internal" href="../enumerations.html#c.ts3sc_ftgetfileinfo" title="ts3sc_ftgetfileinfo">ts3sc_ftgetfileinfo</a> *params<span class="sig-paren">)</span><br /></dt>
<dd><p>called when a client requests file information using <a class="reference internal" href="../client_api.html#clientlib_8h_1ae8c0b60065102c7010517b09769692af"><span class="std std-ref">ts3client_requestFileInfo</span></a>. Allows to deny clients from getting file information. </p>
<p>Return <a class="reference internal" href="../errors.html#public__errors_8h_1a0bcf1e0a5e32989890f6e85064327f7ba21e7fdf5a31623bfa8042865df880a9d"><span class="std std-ref">ERROR_ok</span></a> to allow the action, or <a class="reference internal" href="../errors.html#public__errors_8h_1a0bcf1e0a5e32989890f6e85064327f7bacd0d64c660d7e6009b05bbba5631607d"><span class="std std-ref">ERROR_permissions</span></a> to reject it.</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p><a class="reference internal" href="../errors.html#public__errors_8h_1a0bcf1e0a5e32989890f6e85064327f7ba21e7fdf5a31623bfa8042865df880a9d"><span class="std std-ref">ERROR_ok</span></a> to allow, <a class="reference internal" href="../errors.html#public__errors_8h_1a0bcf1e0a5e32989890f6e85064327f7bacd0d64c660d7e6009b05bbba5631607d"><span class="std std-ref">ERROR_permissions</span></a> to deny </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">serverID</span></code>: the server for which the callback was called </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">client</span></code>: describes the client attempting to get information of the file. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">params</span></code>: describes the file that information is requested for. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c var">
<dt>
unsigned int (*<code class="sig-name descname">permFileTransferGetFileList</code>)<span class="sig-paren">(</span>uint64 serverID, <em class="property">const</em> <em class="property">struct</em> <a class="reference internal" href="../enumerations.html#c.ClientMiniExport" title="ClientMiniExport">ClientMiniExport</a> *client, <em class="property">const</em> <em class="property">struct</em> <a class="reference internal" href="../enumerations.html#c.ts3sc_ftgetfilelist" title="ts3sc_ftgetfilelist">ts3sc_ftgetfilelist</a> *params<span class="sig-paren">)</span><br /></dt>
<dd><p>called when a client requests a directory listing using <a class="reference internal" href="../client_api.html#clientlib_8h_1a2f4af115935ecae757bdbcb8443de7db"><span class="std std-ref">ts3client_requestFileList</span></a>. Allows to deny listing files and directories in channels / directories. </p>
<p>Return <a class="reference internal" href="../errors.html#public__errors_8h_1a0bcf1e0a5e32989890f6e85064327f7ba21e7fdf5a31623bfa8042865df880a9d"><span class="std std-ref">ERROR_ok</span></a> to allow the action, or <a class="reference internal" href="../errors.html#public__errors_8h_1a0bcf1e0a5e32989890f6e85064327f7bacd0d64c660d7e6009b05bbba5631607d"><span class="std std-ref">ERROR_permissions</span></a> to reject it.</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p><a class="reference internal" href="../errors.html#public__errors_8h_1a0bcf1e0a5e32989890f6e85064327f7ba21e7fdf5a31623bfa8042865df880a9d"><span class="std std-ref">ERROR_ok</span></a> to allow, <a class="reference internal" href="../errors.html#public__errors_8h_1a0bcf1e0a5e32989890f6e85064327f7bacd0d64c660d7e6009b05bbba5631607d"><span class="std std-ref">ERROR_permissions</span></a> to deny </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">serverID</span></code>: the server for which the callback was called </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c var">
<dt>
unsigned int (*<code class="sig-name descname">permFileTransferDeleteFile</code>)<span class="sig-paren">(</span>uint64 serverID, <em class="property">const</em> <em class="property">struct</em> <a class="reference internal" href="../enumerations.html#c.ClientMiniExport" title="ClientMiniExport">ClientMiniExport</a> *client, <em class="property">const</em> <em class="property">struct</em> <a class="reference internal" href="../enumerations.html#c.ts3sc_ftdeletefile" title="ts3sc_ftdeletefile">ts3sc_ftdeletefile</a> *params<span class="sig-paren">)</span><br /></dt>
<dd><p>called when a client attempts to delete one or more files using <a class="reference internal" href="../client_api.html#clientlib_8h_1ad51a44944e06592bea370599ba282f44"><span class="std std-ref">ts3client_requestDeleteFile</span></a>. Allows denying clients deleting files. </p>
<p>Return <a class="reference internal" href="../errors.html#public__errors_8h_1a0bcf1e0a5e32989890f6e85064327f7ba21e7fdf5a31623bfa8042865df880a9d"><span class="std std-ref">ERROR_ok</span></a> to allow the action, or <a class="reference internal" href="../errors.html#public__errors_8h_1a0bcf1e0a5e32989890f6e85064327f7bacd0d64c660d7e6009b05bbba5631607d"><span class="std std-ref">ERROR_permissions</span></a> to reject it.</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p><a class="reference internal" href="../errors.html#public__errors_8h_1a0bcf1e0a5e32989890f6e85064327f7ba21e7fdf5a31623bfa8042865df880a9d"><span class="std std-ref">ERROR_ok</span></a> to allow, <a class="reference internal" href="../errors.html#public__errors_8h_1a0bcf1e0a5e32989890f6e85064327f7bacd0d64c660d7e6009b05bbba5631607d"><span class="std std-ref">ERROR_permissions</span></a> to deny </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">serverID</span></code>: the server for which the callback was called </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">client</span></code>: describes the client attempting to delete the file </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">params</span></code>: describes the file to be deleted </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c var">
<dt>
unsigned int (*<code class="sig-name descname">permFileTransferCreateDirectory</code>)<span class="sig-paren">(</span>uint64 serverID, <em class="property">const</em> <em class="property">struct</em> <a class="reference internal" href="../enumerations.html#c.ClientMiniExport" title="ClientMiniExport">ClientMiniExport</a> *client, <em class="property">const</em> <em class="property">struct</em> <a class="reference internal" href="../enumerations.html#c.ts3sc_ftcreatedir" title="ts3sc_ftcreatedir">ts3sc_ftcreatedir</a> *params<span class="sig-paren">)</span><br /></dt>
<dd><p>called when a directory is to be created using <a class="reference internal" href="../client_api.html#clientlib_8h_1af5c0dbb932a7f25b11d19602a4f70cf7"><span class="std std-ref">ts3client_requestCreateDirectory</span></a>. Allows to deny creating certain directories. </p>
<p>Return <a class="reference internal" href="../errors.html#public__errors_8h_1a0bcf1e0a5e32989890f6e85064327f7ba21e7fdf5a31623bfa8042865df880a9d"><span class="std std-ref">ERROR_ok</span></a> to allow the action, or <a class="reference internal" href="../errors.html#public__errors_8h_1a0bcf1e0a5e32989890f6e85064327f7bacd0d64c660d7e6009b05bbba5631607d"><span class="std std-ref">ERROR_permissions</span></a> to reject it.</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p><a class="reference internal" href="../errors.html#public__errors_8h_1a0bcf1e0a5e32989890f6e85064327f7ba21e7fdf5a31623bfa8042865df880a9d"><span class="std std-ref">ERROR_ok</span></a> to allow, <a class="reference internal" href="../errors.html#public__errors_8h_1a0bcf1e0a5e32989890f6e85064327f7bacd0d64c660d7e6009b05bbba5631607d"><span class="std std-ref">ERROR_permissions</span></a> to deny </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">serverID</span></code>: the server for which the callback was called </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">client</span></code>: describes the client attempting to create the directory </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">params</span></code>: describes the directory to create. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c var">
<dt>
unsigned int (*<code class="sig-name descname">permFileTransferRenameFile</code>)<span class="sig-paren">(</span>uint64 serverID, <em class="property">const</em> <em class="property">struct</em> <a class="reference internal" href="../enumerations.html#c.ClientMiniExport" title="ClientMiniExport">ClientMiniExport</a> *client, <em class="property">const</em> <em class="property">struct</em> <a class="reference internal" href="../enumerations.html#c.ts3sc_ftrenamefile" title="ts3sc_ftrenamefile">ts3sc_ftrenamefile</a> *params<span class="sig-paren">)</span><br /></dt>
<dd><p>called when a file is to be renamed or moved using <a class="reference internal" href="../client_api.html#clientlib_8h_1ab13be97ad87ab9b10c38f75d5ad74c41"><span class="std std-ref">ts3client_requestRenameFile</span></a>. Allows to deny moving files or even renaming files. </p>
<p>Return <a class="reference internal" href="../errors.html#public__errors_8h_1a0bcf1e0a5e32989890f6e85064327f7ba21e7fdf5a31623bfa8042865df880a9d"><span class="std std-ref">ERROR_ok</span></a> to allow the action, or <a class="reference internal" href="../errors.html#public__errors_8h_1a0bcf1e0a5e32989890f6e85064327f7bacd0d64c660d7e6009b05bbba5631607d"><span class="std std-ref">ERROR_permissions</span></a> to reject it.</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p><a class="reference internal" href="../errors.html#public__errors_8h_1a0bcf1e0a5e32989890f6e85064327f7ba21e7fdf5a31623bfa8042865df880a9d"><span class="std std-ref">ERROR_ok</span></a> to allow, <a class="reference internal" href="../errors.html#public__errors_8h_1a0bcf1e0a5e32989890f6e85064327f7bacd0d64c660d7e6009b05bbba5631607d"><span class="std std-ref">ERROR_permissions</span></a> to deny </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">serverID</span></code>: the server for which the callback was called </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">client</span></code>: describes the client attempting to rename or move the file. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">params</span></code>: describes the file to be renamed or moved, and where the file should be moved to if it’s being moved. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

</div>
</dd></dl>

</div>
</div>
<div class="section" id="example">
<h2>Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h2>
<p>Example code to check if a client can connect to the server:</p>
<div class="highlight-c notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// Create the function pointer passed to ts3server_initServerLib</span>
<span class="n">funcs</span><span class="p">.</span><span class="n">permClientCanConnect</span> <span class="o">=</span> <span class="n">onPermClientCanConnect</span><span class="p">;</span>

<span class="c1">// Custom callback</span>
<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">onPermClientCanConnect</span><span class="p">(</span><span class="n">uint64</span> <span class="n">serverID</span><span class="p">,</span> <span class="k">const</span> <span class="k">struct</span> <span class="nc">ClientMiniExport</span><span class="o">*</span> <span class="n">client</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Forbid client with nickname &quot;client&quot; to connect</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">strcmp</span><span class="p">(</span><span class="n">client</span><span class="o">-&gt;</span><span class="n">nickname</span><span class="p">,</span> <span class="s">&quot;client&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">ERROR_permissions</span><span class="p">;</span>  <span class="c1">// Deny</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">ERROR_ok</span><span class="p">;</span>  <span class="c1">// Allow</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
<p>Please see the <cite>server_permissions</cite> example for a demonstration of
this mechanism.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="security-salt.html" class="btn btn-neutral float-right" title="Security salts and hashes" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="passwords.html" class="btn btn-neutral float-left" title="Custom passwords" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2020, TeamSpeak Systems GmbH.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>