

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Channel subscriptions &mdash; TeamSpeak SDK 3.1.1.0 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="List clients" href="client-list.html" />
    <link rel="prev" title="Joining a channel" href="channel-join.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> TeamSpeak SDK
          

          
            
            <img src="../_static/logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                3.1.1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../errors.html">TeamSpeak Error Codes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../properties.html">Property Enums</a></li>
<li class="toctree-l1"><a class="reference internal" href="../enumerations.html">Structures &amp; Enumerations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../client_api.html">TeamSpeak Client Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../server_api.html">TeamSpeak Server Functions</a></li>
</ul>
<p class="caption"><span class="caption-text">Server</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../server/intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../server/basic.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../server/list-items.html">List available clients, channels, servers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../server/vserver-manage.html">Create and stop virtual servers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../server/advanced-create.html">Advanced virtual server creation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../server/info.html">Retrieve and store information</a></li>
<li class="toctree-l1"><a class="reference internal" href="../server/channels.html">Managing channels</a></li>
<li class="toctree-l1"><a class="reference internal" href="../server/clients.html">Managing clients</a></li>
<li class="toctree-l1"><a class="reference internal" href="../server/whisper.html">Whisper lists</a></li>
<li class="toctree-l1"><a class="reference internal" href="../server/encryption.html">Custom encryption</a></li>
<li class="toctree-l1"><a class="reference internal" href="../server/passwords.html">Custom passwords</a></li>
<li class="toctree-l1"><a class="reference internal" href="../server/permissions.html">Permission checks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../server/security-salt.html">Security salts and hashes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../server/disable-commands.html">Disabling protocol commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="../server/filetransfer.html">Filetransfer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../server/faq.html">FAQ</a></li>
</ul>
<p class="caption"><span class="caption-text">Client</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="basic.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="connections.html">Managing server connections</a></li>
<li class="toctree-l1"><a class="reference internal" href="logging.html">Logging</a></li>
<li class="toctree-l1"><a class="reference internal" href="audio.html">Client Audio</a></li>
<li class="toctree-l1"><a class="reference internal" href="wave-files.html">Playing wave files</a></li>
<li class="toctree-l1"><a class="reference internal" href="3dsound.html">3D Sound</a></li>
<li class="toctree-l1"><a class="reference internal" href="whisper.html">Whisper lists</a></li>
<li class="toctree-l1"><a class="reference internal" href="voice-encryption.html">Channel voice data encryption</a></li>
<li class="toctree-l1"><a class="reference internal" href="info.html">Retrieve and store information</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="channels.html">Channel Management</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="channel-list.html">List channels</a></li>
<li class="toctree-l2"><a class="reference internal" href="info-channel.html">Channel information</a></li>
<li class="toctree-l2"><a class="reference internal" href="channel-create.html">Creating a new channel</a></li>
<li class="toctree-l2"><a class="reference internal" href="channel-move.html">Moving a channel</a></li>
<li class="toctree-l2"><a class="reference internal" href="channel-sort.html">Channel sorting</a></li>
<li class="toctree-l2"><a class="reference internal" href="channel-delete.html">Deleting a channel</a></li>
<li class="toctree-l2"><a class="reference internal" href="channel-join.html">Joining a channel</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Channel subscriptions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#subscribe-to-channels">Subscribe to channels</a></li>
<li class="toctree-l3"><a class="reference internal" href="#unsubscribe-from-channels">Unsubscribe from channels</a></li>
<li class="toctree-l3"><a class="reference internal" href="#check-subscription-status">Check subscription status</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#example">Example</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#callbacks">Callbacks</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="client-list.html">List clients</a></li>
<li class="toctree-l1"><a class="reference internal" href="client-kick.html">Kicking clients</a></li>
<li class="toctree-l1"><a class="reference internal" href="local-mute.html">Muting other clients</a></li>
<li class="toctree-l1"><a class="reference internal" href="textmessages.html">Text chat</a></li>
<li class="toctree-l1"><a class="reference internal" href="filetransfer.html">Filetransfer</a></li>
<li class="toctree-l1"><a class="reference internal" href="encryption.html">Custom encryption</a></li>
<li class="toctree-l1"><a class="reference internal" href="passwords.html">Custom passwords</a></li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">FAQ</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">TeamSpeak SDK</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="channels.html">Channel Management</a> &raquo;</li>
        
      <li>Channel subscriptions</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="channel-subscriptions">
<h1>Channel subscriptions<a class="headerlink" href="#channel-subscriptions" title="Permalink to this headline">Â¶</a></h1>
<p>By default a user only sees other clients that are in the same channel.
Clients joining or leaving other channels or changing status are not
displayed or announced to a client. To offer a way to get notifications
about clients in other channels, a user can subscribe to other channels.
It is also possible to always subscribe to all channels to get notifications
about all clients on the server.</p>
<p>Subscriptions are meant to have a flexible way to balance bandwidth
usage. On a crowded server limiting the number of subscribed channels is
a way to reduce network traffic.</p>
<p>In addition subscriptions allow to have âprivateâ channels, in that
other clients cannot see who is in a channel.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>A client is always automatically subscribed to the current channel.</p>
</div>
<div class="section" id="subscribe-to-channels">
<h2>Subscribe to channels<a class="headerlink" href="#subscribe-to-channels" title="Permalink to this headline">Â¶</a></h2>
<p>To subscribe to a list of channels call</p>
<dl class="c function">
<dt>
unsigned int <code class="sig-name descname">ts3client_requestChannelSubscribe</code><span class="sig-paren">(</span>uint64 <em>serverConnectionHandlerID</em>, <em class="property">const</em> uint64 *<em>channelIDArray</em>, <em class="property">const</em> char *<em>returnCode</em><span class="sig-paren">)</span><br /></dt>
<dd><p>Request live updates to specific channels, being able to see clients in the channel. </p>
<p>If you intend to subscribe to all channels on the server, use ts3client_requestChannelSubscribeAll function instead. You will receive an onServerErrorEvent with the passed returnCode indicating whether or not the operation was successful.</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>An Error code from the <a class="reference internal" href="../errors.html#public__errors_8h_1a0bcf1e0a5e32989890f6e85064327f7b"><span class="std std-ref">Ts3ErrorType</span></a> enum indicating either success or the failure reason </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">serverConnectionHandlerID</span></code>: the connection handler on which to subscribe to the specified channels </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">channelIDArray</span></code>: a zero terminated array of channel ids to subscribe to </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">returnCode</span></code>: a c string to identify this request in callbacks. Pass an empty string if unused. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<p>To subscribe to all the channels on the server call</p>
<dl class="c function">
<dt>
unsigned int <code class="sig-name descname">ts3client_requestChannelSubscribeAll</code><span class="sig-paren">(</span>uint64 <em>serverConnectionHandlerID</em>, <em class="property">const</em> char *<em>returnCode</em><span class="sig-paren">)</span><br /></dt>
<dd><p>Request live updates from all channels, being able to see clients in the channels. </p>
<p>If you only want to subscribe to a specific subset of channels, use ts3client_requestChannelSubscribe funtion instead. You will receive an onServerErrorEvent with the passed returnCode indicating whether or not the operation was successful.</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>An Error code from the <a class="reference internal" href="../errors.html#public__errors_8h_1a0bcf1e0a5e32989890f6e85064327f7b"><span class="std std-ref">Ts3ErrorType</span></a> enum indicating either success or the failure reason </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">serverConnectionHandlerID</span></code>: the connection handler on which to subscribe to all channels </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">returnCode</span></code>: a c string to identify this request in callbacks. Pass an empty string if unused. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

</div>
<div class="section" id="unsubscribe-from-channels">
<h2>Unsubscribe from channels<a class="headerlink" href="#unsubscribe-from-channels" title="Permalink to this headline">Â¶</a></h2>
<p>To unsubscribe from a list of channels call</p>
<dl class="c function">
<dt>
unsigned int <code class="sig-name descname">ts3client_requestChannelUnsubscribe</code><span class="sig-paren">(</span>uint64 <em>serverConnectionHandlerID</em>, <em class="property">const</em> uint64 *<em>channelIDArray</em>, <em class="property">const</em> char *<em>returnCode</em><span class="sig-paren">)</span><br /></dt>
<dd><p>Remove subscription from channels. No longer receiving updates to clients in the channels. </p>
<p>You will receive an onServerErrorEvent with the passed returnCode indicating whether or not the operation was successful.</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>An Error code from the <a class="reference internal" href="../errors.html#public__errors_8h_1a0bcf1e0a5e32989890f6e85064327f7b"><span class="std std-ref">Ts3ErrorType</span></a> enum indicating either success or the failure reason </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">serverConnectionHandlerID</span></code>: the connection handler on which to unsubscribe from the specified channels </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">channelIDArray</span></code>: a zero terminated array of channel ids to unsubscribe from </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">returnCode</span></code>: a c string to identify this request in callbacks. Pass an empty string if unused. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<p>To unsubscribe from all channels on the server call</p>
<dl class="c function">
<dt>
unsigned int <code class="sig-name descname">ts3client_requestChannelUnsubscribeAll</code><span class="sig-paren">(</span>uint64 <em>serverConnectionHandlerID</em>, <em class="property">const</em> char *<em>returnCode</em><span class="sig-paren">)</span><br /></dt>
<dd><p>Remove subscription from all channels. No longer receiving updates to clients outside of own channel. </p>
<p>The current channel will always be subscribed and you will always receive updates about clients in the current channel. You will receive an onServerErrorEvent with the passed returnCode indicating whether or not the operation was successful.</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>An Error code from the <a class="reference internal" href="../errors.html#public__errors_8h_1a0bcf1e0a5e32989890f6e85064327f7b"><span class="std std-ref">Ts3ErrorType</span></a> enum indicating either success or the failure reason </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">serverConnectionHandlerID</span></code>: the connection handler on which to unsubscribe from all channels </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">returnCode</span></code>: a c string to identify this request in callbacks. Pass an empty string if unused. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Even when unsubscribing from all channels, the client will still be
subscribed to their current channel!</p>
</div>
</div>
<div class="section" id="check-subscription-status">
<h2>Check subscription status<a class="headerlink" href="#check-subscription-status" title="Permalink to this headline">Â¶</a></h2>
<p>To check if we are currently subscribed to a particular channel, check
its <code class="xref c c-enumerator docutils literal notranslate"><span class="pre">CHANNEL_FLAG_ARE_SUBSCRIBED</span></code> property
using <a class="reference internal" href="info-channel.html#c.ts3client_getChannelVariableAsInt" title="ts3client_getChannelVariableAsInt"><code class="xref c c-func docutils literal notranslate"><span class="pre">ts3client_getChannelVariableAsInt()</span></code></a>.</p>
<div class="section" id="example">
<h3>Example<a class="headerlink" href="#example" title="Permalink to this headline">Â¶</a></h3>
<div class="highlight-c notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kt">int</span> <span class="n">isSubscribed</span> <span class="o">=</span> <span class="mi">-1</span><span class="p">;</span>

<span class="n">ts3client_getChannelVariableAsInt</span><span class="p">(</span><span class="n">scHandlerID</span><span class="p">,</span> <span class="n">channelID</span><span class="p">,</span> <span class="n">CHANNEL_FLAG_ARE_SUBSCRIBED</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">isSubscribed</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="n">isSubscribed</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{}</span> <span class="c1">// Subscribed</span>
<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">isSubscribed</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{}</span> <span class="c1">// Not subscribed</span>
<span class="k">else</span> <span class="p">{}</span> <span class="c1">// Error, likely not connected.</span>
</pre></div>
</td></tr></table></div>
</div>
</div>
<div class="section" id="callbacks">
<h2>Callbacks<a class="headerlink" href="#callbacks" title="Permalink to this headline">Â¶</a></h2>
<p>The following callbacks are called as a result of subscribing to or
unsubscribing from a channel</p>
<dl class="c struct">
<dt>
<em class="property">struct </em><code class="sig-name descname">ClientUIFunctions</code><br /></dt>
<dd><p>Defines available callbacks that you can receive. </p>
<p>Set the members of this struct to a function to call when the specific event happens. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Public Members</p>
<dl class="c var">
<dt>
void (*<code class="sig-name descname">onClientMoveSubscriptionEvent</code>)<span class="sig-paren">(</span>uint64 serverConnectionHandlerID, anyID clientID, uint64 oldChannelID, uint64 newChannelID, int visibility<span class="sig-paren">)</span><br /></dt>
<dd><p>called after subscribing to or unsubscribing from a channel. Called once for every client that is in the (un)subscribed channel at this time. </p>
<p>Informs you about newly visible clients after subribing to a channel. Informs about clients that we will no longer receive information about.</p>
<p><dl class="simple">
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">serverConnectionHandlerID</span></code>: specifies on which connection the callback was called </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">clientID</span></code>: id of the client </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">oldChannelID</span></code>: id of the channel that the client was in last time we saw the client. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">newChannelID</span></code>: id of the channel the client is currently in. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">visibility</span></code>: whether we can see the client or not. One of the values from the Visibility enum. Allows to distinguish whether this callback was called after a subscribe or unsubscribe. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c var">
<dt>
void (*<code class="sig-name descname">onChannelSubscribeEvent</code>)<span class="sig-paren">(</span>uint64 serverConnectionHandlerID, uint64 channelID<span class="sig-paren">)</span><br /></dt>
<dd><p>called when a channel was successfully subscribed by us </p>
<p><dl class="simple">
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">serverConnectionHandlerID</span></code>: specifies on which connection the callback was called </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">channelID</span></code>: id of the channel we subscribed to </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c var">
<dt>
void (*<code class="sig-name descname">onChannelSubscribeFinishedEvent</code>)<span class="sig-paren">(</span>uint64 serverConnectionHandlerID<span class="sig-paren">)</span><br /></dt>
<dd><p>called after all channels we attempted to subscribe to are subscribed. </p>
<p><dl class="simple">
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">serverConnectionHandlerID</span></code>: specifies on which connection the callback was called </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c var">
<dt>
void (*<code class="sig-name descname">onChannelUnsubscribeEvent</code>)<span class="sig-paren">(</span>uint64 serverConnectionHandlerID, uint64 channelID<span class="sig-paren">)</span><br /></dt>
<dd><p>called after we unsubscribed from a channel </p>
<p><dl class="simple">
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">serverConnectionHandlerID</span></code>: specifies on which connection the callback was called </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">channelID</span></code>: id of the channel we unsubscribed from. Will no longer receive updates about clients in this channel. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c var">
<dt>
void (*<code class="sig-name descname">onChannelUnsubscribeFinishedEvent</code>)<span class="sig-paren">(</span>uint64 serverConnectionHandlerID<span class="sig-paren">)</span><br /></dt>
<dd><p>called after all channels we attempted to unsubscribe from are unsubscribed </p>
<p><dl class="simple">
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">serverConnectionHandlerID</span></code>: specifies on which connection the callback was called </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

</div>
</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="client-list.html" class="btn btn-neutral float-right" title="List clients" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="channel-join.html" class="btn btn-neutral float-left" title="Joining a channel" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2020, TeamSpeak Systems GmbH.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>